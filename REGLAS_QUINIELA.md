# ğŸ“‹ REGLAS OFICIALES DE LA QUINIELA ESPAÃ‘OLA

## ğŸ›ï¸ **Marco Regulatorio**
- **Normativa**: ResoluciÃ³n BOE-A-1998-17040 del 6 de julio de 1998
- **Organismo**: Organismo Nacional de LoterÃ­as y Apuestas del Estado
- **ActualizaciÃ³n**: ResoluciÃ³n del 6 de julio de 2009 (regulaciones actuales)

---

## ğŸ’° **Estructura de Precios y Premios**

### **Precio Base**
- **Apuesta Simple**: â‚¬0.75 por pronÃ³stico
- **Apuesta MÃ­nima**: â‚¬1.50 (2 pronÃ³sticos o 1 con doble)
- **DistribuciÃ³n de Ingresos**: 55% a premios, 45% gestiÃ³n y reservas

### **CategorÃ­as de Premios**
1. **Primera CategorÃ­a (15 aciertos)**: MÃ¡ximo premio
2. **Segunda CategorÃ­a (14 aciertos)**: Segundo premio  
3. **Tercera CategorÃ­a (13 aciertos)**: Tercer premio
4. **CategorÃ­a Especial (10% reservado)**: Botes y premios especiales

---

## ğŸ¯ **Tipos de PronÃ³sticos**

### **PronÃ³sticos BÃ¡sicos**
- **"1"**: Victoria del equipo local
- **"X"**: Empate
- **"2"**: Victoria del equipo visitante

### **PronÃ³sticos MÃºltiples**
- **Simple**: 1 pronÃ³stico por partido (precio base â‚¬0.75)
- **Doble**: 2 pronÃ³sticos por partido (precio x2 = â‚¬1.50)
- **Triple**: 3 pronÃ³sticos por partido (precio x3 = â‚¬2.25)

---

## ğŸ”„ **Sistemas de Apuestas MÃºltiples**

### **1. MÃ©todo Directo**
**DescripciÃ³n**: Combinaciones libres hasta el mÃ¡ximo permitido
- **MÃ­nimo**: 2 apuestas
- **MÃ¡ximo**: 31,104 apuestas por boleto
- **Flexibilidad**: Total libertad de combinaciones

### **2. MÃ©todo Reducido** â­ **MÃS POPULAR**
**DescripciÃ³n**: Combinaciones predefinidas que optimizan cobertura/precio

#### **Reducciones Oficiales Disponibles:**

**ğŸ¥‡ Primera ReducciÃ³n**
- **ConfiguraciÃ³n**: 4 triples
- **Combinaciones**: 81 apuestas (3â´)
- **Precio**: â‚¬60.75 (81 Ã— â‚¬0.75)
- **Ideal para**: MÃ¡xima cobertura con presupuesto medio

**ğŸ¥ˆ Segunda ReducciÃ³n**
- **ConfiguraciÃ³n**: 7 dobles
- **Combinaciones**: 128 apuestas (2â·)
- **Precio**: â‚¬96.00 (128 Ã— â‚¬0.75)
- **Ideal para**: Equilibrio entre riesgo y cobertura

**ğŸ¥‰ Tercera ReducciÃ³n**
- **ConfiguraciÃ³n**: 3 dobles + 3 triples
- **Combinaciones**: 216 apuestas (2Â³ Ã— 3Â³)
- **Precio**: â‚¬162.00 (216 Ã— â‚¬0.75)
- **Ideal para**: Estrategia mixta avanzada

**ğŸ… Cuarta ReducciÃ³n**
- **ConfiguraciÃ³n**: 6 dobles + 2 triples
- **Combinaciones**: 576 apuestas (2â¶ Ã— 3Â²)
- **Precio**: â‚¬432.00 (576 Ã— â‚¬0.75)
- **Ideal para**: Profesionales con alta confianza

**ğŸ–ï¸ Quinta ReducciÃ³n**
- **ConfiguraciÃ³n**: 8 triples
- **Combinaciones**: 6,561 apuestas (3â¸)
- **Precio**: â‚¬4,920.75 (6,561 Ã— â‚¬0.75)
- **Ideal para**: Sistemas profesionales/sindicatos

**ğŸ† Sexta ReducciÃ³n**
- **ConfiguraciÃ³n**: 11 dobles
- **Combinaciones**: 2,048 apuestas (2Â¹Â¹)
- **Precio**: â‚¬1,536.00 (2,048 Ã— â‚¬0.75)
- **Ideal para**: Cobertura masiva conservadora

### **3. MÃ©todo Condicional**
**DescripciÃ³n**: Apuestas condicionadas a resultados especÃ­ficos
- **Uso**: Avanzado, para expertos
- **Flexibilidad**: MÃ¡xima personalizaciÃ³n
- **Complejidad**: Requiere conocimientos profundos

---

## ğŸ® **ELIGE 8 - Juego Complementario**

### **Â¿QuÃ© es Elige 8?**
Juego complementario asociado a la Quiniela donde seleccionas 8 pronÃ³sticos especÃ­ficos de tu boleto principal.

### **Reglas de Elige 8**
- **Requisito**: Obligatorio jugar Quiniela principal
- **SelecciÃ³n**: Elegir 8 partidos de los 15 de tu Quiniela
- **Precio**: â‚¬0.50 por apuesta Elige 8
- **Precio MÃ­nimo Total**: â‚¬2.00 (â‚¬1.50 Quiniela + â‚¬0.50 Elige 8)

### **Sistema de Premios Elige 8**
- **Fondo Independiente**: 55% del dinero recaudado especÃ­fico de Elige 8
- **CategorÃ­a Ãšnica**: Solo se premia acertar los 8 resultados
- **Sin Botes**: No se acumulan premios no repartidos
- **DistribuciÃ³n**: 100% del fondo para acertantes de 8

---

## ğŸ”¢ **CÃ¡lculos de Combinaciones**

### **FÃ³rmula General**
```
Total Combinaciones = âˆ(i=1 a 15) [Multiplicidad_i]
```

Donde:
- **Multiplicidad_i** = 1 (simple), 2 (doble), 3 (triple)

### **Ejemplos PrÃ¡cticos**

**Ejemplo 1: ReducciÃ³n Simple**
- 13 simples + 2 dobles = 1Â¹Â³ Ã— 2Â² = 1 Ã— 4 = **4 apuestas**
- Precio: 4 Ã— â‚¬0.75 = **â‚¬3.00**

**Ejemplo 2: ReducciÃ³n Media**
- 10 simples + 3 dobles + 2 triples = 1Â¹â° Ã— 2Â³ Ã— 3Â² = 1 Ã— 8 Ã— 9 = **72 apuestas**
- Precio: 72 Ã— â‚¬0.75 = **â‚¬54.00**

**Ejemplo 3: ReducciÃ³n Avanzada**
- 5 simples + 5 dobles + 5 triples = 1âµ Ã— 2âµ Ã— 3âµ = 1 Ã— 32 Ã— 243 = **7,776 apuestas**
- Precio: 7,776 Ã— â‚¬0.75 = **â‚¬5,832.00**

---

## ğŸ“Š **Estrategias Recomendadas**

### **ğŸ”° Principiante**
- **Estrategia**: 13-14 simples + 1-2 dobles
- **InversiÃ³n**: â‚¬3.00 - â‚¬6.00
- **Riesgo**: Bajo
- **Cobertura**: Limitada pero econÃ³mica

### **ğŸ¯ Intermedio**
- **Estrategia**: 10-12 simples + 2-3 dobles + 1-2 triples
- **InversiÃ³n**: â‚¬20.00 - â‚¬100.00
- **Riesgo**: Medio
- **Cobertura**: Equilibrada

### **ğŸ’ Avanzado**
- **Estrategia**: Reducciones oficiales (1Âª-3Âª)
- **InversiÃ³n**: â‚¬60.00 - â‚¬200.00
- **Riesgo**: Alto
- **Cobertura**: MÃ¡xima precisiÃ³n

### **ğŸ† Profesional**
- **Estrategia**: Reducciones masivas (4Âª-6Âª) + Elige 8
- **InversiÃ³n**: â‚¬400.00 - â‚¬5,000.00
- **Riesgo**: Muy alto
- **Cobertura**: Completa

---

## ğŸ› ï¸ **ImplementaciÃ³n TÃ©cnica**

### **Campos de Base de Datos Requeridos**
```sql
-- Tabla principal de quinielas
ALTER TABLE user_quinielas ADD COLUMN:
- bet_type VARCHAR(20) DEFAULT 'simple'  -- 'simple', 'multiple', 'reduced'
- total_combinations INTEGER DEFAULT 1
- total_cost DECIMAL(10,2) DEFAULT 0.75
- elige_8_enabled BOOLEAN DEFAULT FALSE
- elige_8_matches JSON                    -- IDs de 8 partidos seleccionados
- elige_8_cost DECIMAL(5,2) DEFAULT 0.00

-- Tabla de pronÃ³sticos individuales
ALTER TABLE user_quiniela_predictions ADD COLUMN:
- multiplicity INTEGER DEFAULT 1         -- 1=simple, 2=doble, 3=triple
- prediction_options JSON                 -- ["1"], ["1","X"], ["1","X","2"]
```

### **LÃ³gica de ValidaciÃ³n**
```python
def validate_quiniela_bet(predictions, elige_8_matches=None):
    """Validar apuesta de quiniela segÃºn reglas oficiales"""
    
    # Validar 15 partidos
    if len(predictions) != 15:
        raise ValueError("Quiniela debe tener exactamente 15 partidos")
    
    # Calcular combinaciones totales
    total_combinations = 1
    for pred in predictions:
        multiplicity = len(pred.prediction_options)
        if multiplicity not in [1, 2, 3]:
            raise ValueError("Multiplicidad debe ser 1, 2 o 3")
        total_combinations *= multiplicity
    
    # Validar lÃ­mites
    if total_combinations < 2:
        raise ValueError("MÃ­nimo 2 apuestas requeridas")
    if total_combinations > 31104:
        raise ValueError("MÃ¡ximo 31,104 apuestas permitidas")
    
    # Validar Elige 8
    if elige_8_matches:
        if len(elige_8_matches) != 8:
            raise ValueError("Elige 8 requiere exactamente 8 partidos")
        if not all(match_id in [p.match_id for p in predictions] for match_id in elige_8_matches):
            raise ValueError("Partidos Elige 8 deben estar en Quiniela principal")
    
    # Calcular costo
    base_cost = total_combinations * 0.75
    elige_8_cost = 0.50 if elige_8_matches else 0.00
    total_cost = base_cost + elige_8_cost
    
    # Validar costo mÃ­nimo
    if total_cost < 1.50:
        raise ValueError("Apuesta mÃ­nima â‚¬1.50")
    
    return {
        'valid': True,
        'total_combinations': total_combinations,
        'base_cost': base_cost,
        'elige_8_cost': elige_8_cost,
        'total_cost': total_cost
    }
```

---

## ğŸ“± **Interfaz de Usuario Recomendada**

### **Selector de Modalidad**
1. **ğŸ¯ Simple**: PronÃ³stico Ãºnico por partido
2. **âš¡ MÃºltiple**: Dobles y triples libres
3. **ğŸ† Reducida**: Sistemas oficiales predefinidos
4. **ğŸ® + Elige 8**: Cualquier modalidad + Elige 8

### **Controles por Partido**
- **Radio buttons**: Para simples (1, X, 2)
- **Checkboxes**: Para mÃºltiples (combinaciones)
- **Indicador visual**: Multiplicidad y costo en tiempo real

### **Panel de Resumen**
- **Combinaciones totales**: CÃ¡lculo automÃ¡tico
- **Costo base**: â‚¬X.XX
- **Costo Elige 8**: â‚¬0.50 (si activo)
- **Total**: â‚¬X.XX
- **Ganancia potencial**: EstimaciÃ³n basada en categorÃ­as

---

**âœ… SISTEMA LISTO PARA IMPLEMENTACIÃ“N**

*DocumentaciÃ³n basada en normativa oficial BOE y reglamentos de LoterÃ­as y Apuestas del Estado*